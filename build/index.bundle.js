!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var s in t)("object"==typeof exports?exports:e)[s]=t[s]}}(this,(()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const r=require("http"),t=require("https"),s=require("fs"),o=require("path"),i=require("express"),n=(0,i.Router)(),p=new class{constructor(){}home(e,r){r.status(200).render(s.readFileSync("./base.pug"))}};n.get("/",p.home);const c=n,a=i();a.use(i.json()),a.set("view engine","pug"),a.set("views",o.join(__dirname,"views")),a.use("/",c);const l=a;return(new class{constructor(){this.app=l,this.port=this.normalizePort("3000"),this.setServer()}normalizePort(e){const r=parseInt(e,10);return isNaN(r)?e:r>=0&&r}errorHandler(e){if(console.log(e),"listen"!==e.syscall)throw e;const r=this.server.address(),t="string"==typeof r?"pipe "+r:"port: "+this.port;switch(e.code){case"EACCES":console.error(t+" requires elevated privileges."),process.exit(1);case"EADDRINUSE":console.error(t+" is already in use."),process.exit(1);default:throw e}}setAppExpress(){this.app.set("port",this.port)}setServer(){this.setAppExpress(),this.server=this.checkHttpsConfig?t.createServer({key:s.readFileSync("selfsigned.key"),cert:s.readFileSync("selfsigned.crt")},this.app):r.createServer(this.app),this.server.on("error",this.errorHandler),this.server.on("listening",(()=>{const e=this.server.address(),r="string"==typeof e?"pipe "+e:"port "+this.port;console.log("Listening on "+r)}))}listen(){this.server.listen(this.port)}checkHttpsConfig(){return"HTTPS"==="HTTP".toUpperCase()}}).listen(),e})()));